<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>plplugin(1)</title>
</head>
<body>
<h3><a name="Name"></a>Name</h3>
<blockquote><b>plplugin</b> - the Pipeline plugin installation tool<br>
</blockquote>
<h3><a name="Synopsis"></a>Synopsis</h3>
<blockquote><b>plplugin</b> [<a
 href="plplugin.src.html.in#Global_Options"><i>options</i></a>] <a
 style="font-weight: bold;" href="#--list">--list</a><span
 style="font-weight: bold;"> </span><br>
  <b>plplugin</b> [<a href="plplugin.src.html.in#Global_Options"><i>options</i></a>]
  <a href="#--inspect"><span style="font-weight: bold;">--inspect</span></a>
  <i>class-file1 </i>[<i>class-file2 ...</i>]<b><br>
plplugin</b> [<a href="plplugin.src.html.in#Global_Options"><i>options</i></a>]
[<a href="#--force"><span style="font-weight: bold;">--force</span></a>]
  <a href="#--install"><span style="font-weight: bold;">--install</span></a>
  <i>class-file1 </i>[<i>class-file2 ...</i>]<i><br>
  </i><br>
  <b>plplugin</b> <a style="font-weight: bold;" href="#--help">--help</a><br>
  <b>plplugin</b> <a style="font-weight: bold;" href="#--html-help">--html-help</a><br>
  <b>plplugin</b> <a style="font-weight: bold;" href="#--version_">--version</a><br>
  <b>plplugin</b> <a style="font-weight: bold;" href="#--release-date">--release-date</a><br>
  <b>plplugin</b> <a style="font-weight: bold;" href="#--copyright">--copyright</a><br>
  <span style="font-weight: bold;">plplugin <a href="#--license">--license</a></span><br>
</blockquote>
<h3><a name="Description"></a>Description<br>
</h3>
<blockquote>Pipeline can be extended through the use of Java plugins
written using the <a href="../javadoc/index.html"><span
 style="font-weight: bold;">Pipeline API</span></a>.&nbsp; This tool is
used to install new plugins or update existing plugins in a safe manner
so that running Pipeline daemons and client programs will properly load
and use the newly installed plugins.&nbsp; All Pipeline programs which
use plugins are capable of reloading plugins on the fly.&nbsp; This is
important when developing and testing new plugins, but it requires that
care be taken so that Pipeline maintains a consistent state.&nbsp; <br>
  <br>
  <span style="color: rgb(153, 0, 0);">If you manually copy plugin Java
class files into the installed plugin directories without using </span><span
 style="font-weight: bold; color: rgb(153, 0, 0);">plplugin</span><span
 style="color: rgb(153, 0, 0);">(1), various bad things can happen
ranging from erratic behavior of Pipeline to outright crashes of the
server daemons!&nbsp; </span><br>
  <br>
Plugins can be installed only when this program is run by the
(@PIPELINE_USER@) user.<br>
</blockquote>
<h3><a name="Plugin_Limitations"></a>Plugin Requirements</h3>
<blockquote>Besides safe copying of plugin files, <span
 style="font-weight: bold;">plplugin</span>(1) inspects the compiled
Java class files to make sure they will be loaded properly by Pipeline
programs before performing the installation.&nbsp; Due to the dynamic
nature of how Pipeline programs load plugins, there are some
restrictions on what plugins may contain and how they are named and
versioned.<br>
  <br>
All plugins must be a (direct or indirect) subclass of one of the
plugin base classes: <a
 href="../javadoc/us/temerity/pipeline/BaseEditor.html"><span
 style="font-weight: bold;">BaseEditor</span></a>, <a
 href="../javadoc/us/temerity/pipeline/BaseAction.html"><span
 style="font-weight: bold;">BaseAction</span></a> or <a
 href="../javadoc/us/temerity/pipeline/BaseComparator.html"><span
 style="font-weight: bold;">BaseComparator</span></a>.&nbsp; Each of
these classes has a protected constructor which should be called from
your plugin's single no-arg constructor with constant values for the
following three parameters:<br>
  <div style="margin-left: 40px;"><br>
  <span style="font-family: monospace;">String name</span><br>
  <br>
  <div style="margin-left: 40px;">The unique name of the plugin.&nbsp;
This name should be short since it will be used in popup menus and
option lists within <span style="font-weight: bold;">plui</span>(1) to
identify the plugin.&nbsp; For convenience of using the names in
scripts and command line arguments, its advisable that it does not
contain whitespace or other non-printable characters.<br>
  </div>
  <br>
  <span style="font-family: monospace;">VersionID vid</span><br>
  <br>
  <div style="margin-left: 40px;">The plugin revision number.&nbsp;
Pipeline allows multiple versions of the same plugin to be used
simultaneously and this revision number is used to distinguish between
the various versions.&nbsp; <br>
  </div>
  <br>
  <span style="font-family: monospace;">String desc</span><br>
  <br>
  <div style="margin-left: 40px;">A short description of the
plugin.&nbsp; This should be a short phrase suitable for use in tool
tips and other one line UI contexts.<br>
  <br>
  </div>
  </div>
The plugin class should belong to a Java package who's last component
corresponds with the plugin revision number.&nbsp; Due to the syntax of
Java package specifications a "v" must be prepended to the version
number and the version number component must be separated by "_"
instead of "." characters.&nbsp; <br>
  <br>
For example, here is complete source code of the 1.0.0 version of the
simple Emacs editor plugin distributed with Pipeline:<br>
  <div style="margin-left: 40px;"><br>
  <span style="font-family: monospace;"><a name="emacs"></a>package
us.temerity.pipeline.plugin.v1_0_0;</span><br
 style="font-family: monospace;">
  <br style="font-family: monospace;">
  <span style="font-family: monospace;">import
us.temerity.pipeline.BaseEditor; </span><br
 style="font-family: monospace;">
  <span style="font-family: monospace;">import
us.temerity.pipeline.VersionID; </span><br
 style="font-family: monospace;">
  <br style="font-family: monospace;">
  <span style="font-family: monospace;">/**</span><br
 style="font-family: monospace;">
  <span style="font-family: monospace;">&nbsp;* The GNU extensible,
customizable, self-documenting text editor.</span><br
 style="font-family: monospace;">
  <span style="font-family: monospace;">&nbsp;*/</span><br
 style="font-family: monospace;">
  <span style="font-family: monospace;">public</span><br
 style="font-family: monospace;">
  <span style="font-family: monospace;">class EmacsEditor</span><br
 style="font-family: monospace;">
  <span style="font-family: monospace;">&nbsp; extends BaseEditor</span><br
 style="font-family: monospace;">
  <span style="font-family: monospace;">{&nbsp; </span><br
 style="font-family: monospace;">
  <span style="font-family: monospace;">&nbsp; public</span><br
 style="font-family: monospace;">
  <span style="font-family: monospace;">&nbsp; EmacsEditor()</span><br
 style="font-family: monospace;">
  <span style="font-family: monospace;">&nbsp; {</span><br
 style="font-family: monospace;">
  <span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;
super("Emacs", new VersionID("1.0.0"),</span><br
 style="font-family: monospace;">
  <span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "The GNU extensible, customizable,
self-documenting text editor.", </span><br
 style="font-family: monospace;">
  <span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "emacs");</span><br
 style="font-family: monospace;">
  <span style="font-family: monospace;">&nbsp; }</span><br
 style="font-family: monospace;">
  <br style="font-family: monospace;">
  <span style="font-family: monospace;">&nbsp; private static final
long serialVersionUID = -5044455288055639029L;</span><br
 style="font-family: monospace;">
  <span style="font-family: monospace;">}</span><br
 style="font-family: monospace;">
  <br style="font-family: monospace;">
  </div>
You could use a shorter package name, but the general Java convention
of prefixing the package with the company domain in reverse order is
advisable to facilitate sharing of Pipeline plugins between
sites.&nbsp; <br>
  <br>
Notice that the Java class name is "EmacsEditor" and not "Emacs".&nbsp;
There is no requirement that Editor plugins have "Editor" in their
names or that the class name corresponds to the plugin name, but its
probably not a bad scheme for keeping things
straight.&nbsp;&nbsp;&nbsp; <br>
  <br>
Notice that a "serialVersionUID" is provided for the plugin.&nbsp; This
is important since these classes are serialized by Pipeline programs
when communicating with each other over the network and this reduces
the possibility of Java's serialization system from getting mixed
up.&nbsp; You can easily generate this ID using the <span
 style="font-weight: bold;">serialver</span>(1) program shipped with
Sun's Java development environment.<br>
  <br>
The source code for all of the plugins which are distributed by
Temerity with Pipeline can be found here:<br>
  <br>
  <div style="margin-left: 40px;">@ROOT_INST_DIR@/examples/us/temerity/pipeline/plugin<br>
  </div>
</blockquote>
<h3><a name="Important_Caveats"></a>Important Caveats</h3>
<blockquote>Pipeline has a flexible plugin architecture, but it can get
you into trouble if you aren't careful.&nbsp; <br>
  <br>
Action plugins should be treated with some extra caution.&nbsp; Its
important to remember that one of Pipeline's fundamental principles is
that checked-in nodes with regeneration actions should be able to
exactly regenerate their files at any time.&nbsp; If you replace a
version of an Action plugin that is used by checked-in nodes you are
taking a big risk that you may change this behavior.<br>
  <br>
The reason for plugin versioning is to avoid this possibility.&nbsp;
Whenever you are going to tinker with an existing Action plugin, you
should first create a new plugin version.&nbsp;&nbsp; This guarantees
that both checked-in and working versions of nodes which use the older
versions of the plugin will continue to behave in a consistent manner
while you test the new Action. <br>
  <br>
New plugin versions will not be visible to non-privileged users until
they are made active using the the <span style="font-weight: bold;">Manage
Plugins</span> dialog in <a href="plui.html"><span
 style="font-weight: bold;">plui</span></a>(1).&nbsp; This way a plugin
can be thoroughly tested before its is used in production.<br>
</blockquote>
<h3> </h3>
<h3><a name="Information_Options"></a>Information Options</h3>
<blockquote>The following options provide information about <b>plplugin</b>(1)
and then immediately exit:</blockquote>
<blockquote><b><a name="--help"></a>--help</b><br>
  <blockquote>Prints a brief usage message and exits.<br>
  </blockquote>
  <b><a name="--html-help"></a>--html-help</b><br>
  <blockquote>Opens this page using the <a
 href="http://www.mozilla.org"><b>mozilla</b></a>(1) web browser.&nbsp;
  </blockquote>
  <b><a name="--version"></a>--version</b><br>
  <blockquote>Prints the version number of this software and exits.<br>
  </blockquote>
  <b><a name="--release-date"></a>--release-date</b><br>
  <blockquote> Prints date that this software was released and exits.<br>
  </blockquote>
  <b><a name="--copyright"></a>--copyright<br>
  </b><br>
  <div style="margin-left: 40px;"> Prints the <a href="#Copyright"><span
 style="font-weight: bold;">copyright notice</span></a> for this
software and exits.<br>
  <br>
  </div>
  <span style="font-weight: bold;"><a name="--license"></a>--license<br>
  <br>
  </span>
  <div style="margin-left: 40px;">Prints the <a
 href="#License_Agreement"><span style="font-weight: bold;">license
agreement</span></a> for this software and exits.<br>
  </div>
  <blockquote> </blockquote>
</blockquote>
<h3><a name="Global_Options"></a>Global Options<br>
</h3>
<div style="margin-left: 40px;"><span style="font-weight: bold;"><a
 name="--log"></a>--log</span>=<span style="font-style: italic;">logger:level</span>[<span
 style="font-style: italic;">,logger:level</span>[...]]</div>
<div style="margin-left: 40px;"><br>
<div style="margin-left: 40px;">In addition to the normal output, <b>plplugin</b>(1)
can
generate
detailed output tracing the various stages of internal execution.&nbsp;
The arguments control the several different types
of logging information (<span style="font-style: italic;">logger</span>)
and different amounts of information (<span style="font-style: italic;">level</span>)
of each type to generate.&nbsp; Several loggers can be modified in one
option.<br>
<br>
The (<span style="font-style: italic;">logger</span>) portion of the
option's argument can be:<br>
<span style="font-weight: bold;"><br>
</span>
<div style="margin-left: 40px;"><span style="font-weight: bold;">all</span><br
 style="font-weight: bold;">
</div>
<div style="margin-left: 80px;">A shortcut for specifying all loggers
at once.<br>
</div>
<div style="margin-left: 40px;"><br>
<span style="font-weight: bold;">arg</span><br>
<span style="font-weight: bold;"></span></div>
<div style="margin-left: 80px;">Logs errors related to parsing the
command-line options.<br>
<br>
</div>
<div style="margin-left: 40px;"><span style="font-weight: bold;">ops</span><br>
<span style="font-weight: bold;"></span></div>
<div style="margin-left: 80px;">Logs queue job related activity of
the
server.<br>
</div>
<div style="margin-left: 40px;"><span style="font-weight: bold;"><br>
plg</span><br>
<div style="margin-left: 40px;">Logs the loading and
initialization of
Action, Editor and Tool plugins.<br>
<span style="font-weight: bold;"></span><br>
<span style="font-weight: bold;"></span></div>
<span style="font-weight: bold;">sub</span><br>
<div style="margin-left: 40px;">Logs the launching and monitoring
of OS level subprocesses.</div>
</div>
<br>
<span style="font-weight: bold;"></span>The (<span
 style="font-style: italic;">level</span>) portion of
the option's argument can be:<br>
<br>
<div style="margin-left: 40px;"><span style="font-weight: bold;">severe</span><br>
<span style="font-weight: bold;"></span></div>
<div style="margin-left: 80px;">This level is used for error messages
and other catastrophic events.<br>
</div>
<div style="margin-left: 40px;"><br style="font-weight: bold;">
<span style="font-weight: bold;">warning</span><br>
</div>
<div style="margin-left: 80px;">This level is used for non-fatal error
messages and advisory information.<br>
</div>
<div style="margin-left: 40px;"><br style="font-weight: bold;">
<span style="font-weight: bold;">info</span><br>
</div>
<div style="margin-left: 80px;">This is the default output level for
all loggers and is used for normal output from <b>plplugin</b>(1). <br>
</div>
<div style="margin-left: 40px;"><br style="font-weight: bold;">
<span style="font-weight: bold;">fine</span><br>
<span style="font-weight: bold;"></span><span style="font-weight: bold;">finer</span><br>
<span style="font-weight: bold;"></span><span style="font-weight: bold;">finest</span><br>
</div>
<div style="margin-left: 80px;">These three levels are used for
increasingly more detailed command tracing messages. <br>
</div>
<br>
Logging can also be controlled on a system-wide basis by modifying the <a
 href="#logger_properties"><span style="font-weight: bold;">logger.properties</span></a>
file installed as part of the Pipeline distribution. <span
 style="font-weight: bold;"></span>See the Java
API documentation for the class<span style="font-weight: bold;">
java.util.logging.Logger</span> for more information about the format
of this file.&nbsp; Settings from the <a href="#--log"><span
 style="font-weight: bold;">--log</span></a> option will override
settings from the <span style="font-weight: bold;">logger.properties</span>
file.<br>
</div>
</div>
<h3><a name="Action_Options"></a>Action Options</h3>
<div style="margin-left: 40px;">The following options specify the
action to be taken by <b>plplugin</b>(1) and may be followed by the
file system paths to one or more compiled Java class files containing
Pipeline plugins.&nbsp; The class files should each contain one plugin
and be named identically to the Java class with the "<span
 style="font-family: monospace;">.class</span>" extension
appended.&nbsp; <br>
<br>
Each of the class file arguments is loaded using a Java class path
containing only the current directory.&nbsp; This means that <span
 style="font-weight: bold;">plplugin</span>(1) should be run from the
top Java build directory so that the directory portion of the class
file path matches the package name.&nbsp; <br>
<br>
For instance, to command line to install the <a href="#emacs"><span
 style="font-weight: bold;">EmacsEditor</span></a> plugin<span
 style="font-weight: bold;"> </span>mentioned above would be be: <br>
<br>
<div style="margin-left: 40px;"><span style="font-family: monospace;">&gt;
plplugin us/temerity/pipeline/plugin/v1_0_0/EmacsEditor.class<br>
</span></div>
<br>
</div>
<div style="margin-left: 40px;"><span style="font-weight: bold;"><a
 name="--list"></a>--list</span><br>
<span style="font-weight: bold;"></span></div>
<div style="margin-left: 80px;"><br>
Lists information about the currently installed plugins and exits.<br>
<br>
<br>
</div>
<div style="margin-left: 40px;"><span style="font-weight: bold;"><a
 name="--inspect"></a>--inspect</span><i> class-file1 </i>[<i>class-file2
...</i>]
<div style="margin-left: 40px;"><br>
Loads the given class
files, verifies that they are legal Pipeline plugins and prints
information about the plugins.<br>
</div>
</div>
<div style="margin-left: 40px;"><br>
<br>
<span style="font-weight: bold;"><a name="--force"></a>--install</span><i>
class-file1 </i>[<i>class-file2 ...</i>]<br>
<div style="margin-left: 40px;"><br>
Installs plugins contained in the given class files and prints
information about the installed plugins.&nbsp; <br>
</div>
<br>
<span style="font-weight: bold;"><a name="--force_"></a>--force</span><br>
<span style="font-weight: bold;"></span><br>
<div style="margin-left: 40px;">By default, the <a href="#--install"><span
 style="font-weight: bold;">--install</span></a> option <span
 style="font-weight: bold;"></span>will
generate a warning message and refuse to install a plugin if there
exists a prevously installed plugin with the same name and
version.&nbsp; If this option
is specified before <a href="#--install"><span
 style="font-weight: bold;">--install</span></a>, any previously
installed plugins which conflict with the given plugins will be
replaced.<br>
<br>
This option should not be used on an Action plugin which is currently
visible to non-privileged users as it may cause unexpected consequences
(see <a href="#Important_Caveats"><span style="font-weight: bold;">Important
Caveats</span></a>).<br>
</div>
</div>
<h3><a name="See_Also"></a>See Also</h3>
<div style="margin-left: 40px;"><span style="font-weight: bold;">Documentation</span>
<br>
</div>
<div style="margin-left: 80px;"><a href="../manuals/index.html"
 style="font-weight: bold;">Pipeline
Manual</a><span style="font-weight: bold;">, </span><a
 href="../javadoc/index.html"><span style="font-weight: bold;">Pipeline
Java API</span></a><br>
<br>
</div>
<div style="margin-left: 40px;"><span style="font-weight: bold;">Pipeline
Programs</span><br>
</div>
<div style="margin-left: 80px;"><a href="plui.html"><span
 style="font-weight: bold;">plui</span></a>(1), <a href="plscript.html"><span
 style="font-weight: bold;">plscript</span></a>(1), <a
 href="plmaster.html"><span style="font-weight: bold;">plmaster</span></a>(1),
<a href="plfilemgr.html"><span style="font-weight: bold;">plfilemgr</span></a>(1),
<a href="plnotify.html"><span style="font-weight: bold;">plnotify</span></a>(1),
<a href="plqueuemgr.html"><span style="font-weight: bold;">plqueuemgr</span></a>(1),
<a href="pljobmgr.html"><span style="font-weight: bold;">pljobmgr</span></a>(1),&nbsp;<a
 href="plplugin.html"><span style="font-weight: bold;"></span></a><a
 href="../../../../../../../usr/share/doc/plconfig-@PLCONFIG_VERSION@/plconfig.html"><span
 style="font-weight: bold;">plconfig</span></a>(1)<a
 href="plnotify.html"><span style="font-weight: bold;"></span></a><br>
<br>
</div>
<div style="margin-left: 40px;"><span style="font-weight: bold;">Other
Software</span><br>
<div style="margin-left: 40px;"><a href="http://www.mozilla.org/"><b>mozilla</b></a>(1)</div>
</div>
<h3><a name="Files"></a>Files</h3>
<div style="margin-left: 40px; font-weight: bold;"><a name="plugins_dir"></a><a
 href="../../../plugins">@ROOT_INST_DIR@/plugins</a><br>
</div>
<div style="margin-left: 40px;"><br>
<div style="margin-left: 40px;">The directory containing the installed
plugin class files.<br>
</div>
</div>
<br>
<div style="margin-left: 40px;"><span style="font-weight: bold;"><a
 name="logger_properties"></a><a href="../../logger.properties">logger.properties</a></span><br>
<div style="margin-left: 40px;"><br>
The site configuration for output loggers used by Pipeline
programs.&nbsp;
See the <a href="#--log"><span style="font-weight: bold;">--log </span></a>option
for details about the individual loggers.</div>
</div>
<h3><a name="Author"></a>Author</h3>
<div style="margin-left: 40px;">Created by <span
 style="font-weight: bold;">Jim Callahan</span> of <a
 href="http://temerity.us/"><span style="font-weight: bold;">Temerity
Software, Inc</span></a>.</div>
<span style="font-weight: bold;">
</span>
<h3><a name="Copyright"></a>Copyright</h3>
<div style="margin-left: 40px;">
@COPYRIGHT@
<br>
</div>
<h3><a name="License_Agreement"></a>License Agreement</h3>
<div style="margin-left: 40px;">
@LICENSE@
</div>
<br>
</body>
</html>
