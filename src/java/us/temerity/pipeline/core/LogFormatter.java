// $Id: LogFormatter.java,v 1.2 2004/03/23 07:40:37 jim Exp $

package us.temerity.pipeline.core;

import java.util.Date;
import java.util.logging.*;
import java.text.*;

/*------------------------------------------------------------------------------------------*/
/*   L O G   F O R M A T T E R                                                              */
/*------------------------------------------------------------------------------------------*/

/** 
 * A standardized logging formatter for all log messages generated by Pipeline programs.
 */
public
class LogFormatter
  extends Formatter
{  
  /*----------------------------------------------------------------------------------------*/
  /*   C O N S T R U C T O R                                                                */
  /*----------------------------------------------------------------------------------------*/
  
  public 
  LogFormatter()
  {}


  /*----------------------------------------------------------------------------------------*/
  /*   F O R M A T                                                                          */
  /*----------------------------------------------------------------------------------------*/
  
  /**
   * Format the given log record and return the formatted string.
   *
   * @param record 
   *   The log record to be formatted.
   */ 
  public String 
  format
  (
   LogRecord record  
  ) 
  {
    String parts[] = record.getLoggerName().split("\\.");
    String name = parts[parts.length-1].toUpperCase();

    SimpleDateFormat fmt = new SimpleDateFormat("E MMM dd HH:mm:ss z yyyy");
    String stamp = fmt.format(new Date(record.getMillis()));

    if(record.getLevel().equals(Level.SEVERE)) {
      return (name + "-ERROR: " + stamp + sNL +
	      record.getMessage() + sNL);
    }
    else if(record.getLevel().equals(Level.WARNING)) {
      return (name + "-WARNING: " + stamp + sNL +
	      record.getMessage() + sNL);
    }
    else if(record.getLevel().equals(Level.INFO)) {
      return (record.getMessage() + sNL);
    }
    else  {
      return (name + "-DEBUG [" + record.getLevel().toString().toLowerCase() + "]: " + 
	      record.getMessage() + sNL);
    }
  }
  

  /*----------------------------------------------------------------------------------------*/
  /*   I N T E R N A L S                                                                    */
  /*----------------------------------------------------------------------------------------*/

  /** 
   * Cached line seperator.
   */ 
  private static String sNL = System.getProperty("line.separator", "\n");

}



