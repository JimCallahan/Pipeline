Summary: The standalone plnotify(1) Pipeline daemon.
Name: plnotify-@CUSTOMER@
Version: @VERSION@
Release: @PROFILE_STAMP@
URL: http://www.temerity.us/pipeline
License: Commercial
Vendor: Temerity Software, Inc
Group: Applications/Productivity
BuildRoot: %{_tmppath}/%{name}-root
Source0: http://temerity.us/plnotify-@CUSTOMER@-@VERSION@-@PROFILE_STAMP@.tgz

%description
The C++ code for the plnotify(1) daemon, support libraries and scripts 
provided separate from the main Pipeline RPM so that they can be rebuild 
for compatibility with a non-standard file server configuration.

The source RPM should be rebuilt on the file server (@PL_FILE_SERVER@)
in order to generate a binary RPM specialized for the file server's 
configuration.  This is easily accomplished by: 

 > ssh @PL_FILE_SERVER@
 > rpmbuild --rebuild plnotify-@CUSTOMER@-@VERSION@-@PROFILE_STAMP@.srpm

If successful, the rebuilt binary RPM will install binaries and libraries
in an architecture specific subdirectory of the (sbin) and (lib) 
directories of the main Pipeline distribution called (@PL_FILE_SERVER@) 
so as to avoid conflicts with already installed default versions of 
these files.  

The directory: 

  @ROOT_INST_DIR@/sbin/@PL_FILE_SERVER@

should be used instead of the usual directory: 

  @ROOT_INST_DIR@/sbin

in the PATH of the file server (@PL_FILE_SERVER@) in order for it to 
use the native binaries and libraries in this RPM.

%prep
rm -rf plnotify
tar -zxvf %{SOURCE0}


%build
pushd plnotify
./configure
make all
popd


%install
pushd plnotify
DESTDIR=${RPM_BUILD_ROOT} make install
popd


%clean
rm -rf ${RPM_BUILD_ROOT}


%files

%defattr(4550,root,@PIPELINE_GROUP@)
@ROOT_INST_DIR@/sbin/@PL_FILE_SERVER@/plrun
@ROOT_INST_DIR@/sbin/@PL_FILE_SERVER@/plnotify

%defattr(500,@PIPELINE_USER@,@PIPELINE_GROUP@)
@ROOT_INST_DIR@/sbin/@PL_FILE_SERVER@/plfilemgr

%defattr(-,root,root)
@ROOT_INST_DIR@/lib/@PL_FILE_SERVER@/libDNotify.so
@ROOT_INST_DIR@/lib/@PL_FILE_SERVER@/libNative.so


%changelog
* @RPM_DATE@ Jim Callahan <jim@salamander>
Latest build.



